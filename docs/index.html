<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Functions and convenience tools for accessing CANSIM data • cansim</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Functions and convenience tools for accessing CANSIM data">
<meta property="og:description" content="Searches for, accesses, and retrieves new-format and old-format CANSIM data 
    tables as tidy data frames. This package deals with encoding issues, allows for 
    bilingual English or French language data retrieval, and bundles convenience functions 
    to make it easier to work with CANSIM data. ">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cansim</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/cansim.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/listing_cansim_tables.html">Listing CANSIM tables</a>
    </li>
    <li>
      <a href="articles/retrieving_cansim_vectors.html">Retrieving individual CANSIM vectors</a>
    </li>
    <li>
      <a href="articles/working_with_hierarchies.html">Working with CANSIM hierarchies</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    

<div id="cansim" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#cansim" class="anchor"></a>cansim</h1></div>
<p>R package to download Statistics Canada CANSIM/NDM tables.</p>
<p>This package:</p>
<ul>
<li>Downloads CANSIM/NDM tables as analysis-ready tidy data frames</li>
<li>Works with new NDM tables and legacy CANSIM table catalogue numbers</li>
<li>Bilingual</li>
<li>Caches downloaded data for faster loading and less waiting</li>
<li>Convenience functions for relabelling and rescaling when appropriate</li>
</ul>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"mountainmath/cansim"</span>)</a></code></pre></div>
</div>
<div id="caching" class="section level3">
<h3 class="hasAnchor">
<a href="#caching" class="anchor"></a>Caching</h3>
<p>As many CANSIM table downloads can be quite large in size, the cansim package will temporarily cache data for the duration of the current R session. This reduces unnecessary waiting when recompiling code. You can also set up an explicit cache location that will be persistent across sessions by setting <code>options(cache_path="your_cache_path")</code> in your .Rprofile.</p>
</div>
<div id="basic-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic Usage</h3>
<p>Use old or new table number to download entire CANSIM or NDM tables into a tidy dataframe. The cansim package retains the ability to work with legacy CANSIM table numbers or their new NDM equivalent. Calling either the legacy CANSIM table number or the new NDM number will load the same data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Retrieve data for births table: 17-10-0016-01 (formerly: CANSIM 051-0013)</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">births &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_cansim.html">get_cansim</a></span>(<span class="st">"051-0013"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">births &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_cansim.html">get_cansim</a></span>(<span class="st">"17-10-0016-01"</span>)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co"># Retrieve data for balance of payment table 36-10-0042-01 (formerly CANSIM  376-8105)</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">bop &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_cansim.html">get_cansim</a></span>(<span class="st">"3768105"</span>)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">bop &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_cansim.html">get_cansim</a></span>(<span class="st">"36-10-0042"</span>)</a></code></pre></div>
</div>
<div id="bilingual---note-french-metadata-currently-unavailable" class="section level3">
<h3 class="hasAnchor">
<a href="#bilingual---note-french-metadata-currently-unavailable" class="anchor"></a>Bilingual - * NOTE: French metadata currently unavailable *</h3>
<p>The cansim package works in either English or French. There is an optional language argument to retrieve CANSIM/NDM tables in French:</p>
<p>Le paquet cansim fonctionne en anglais ou en français. Il existe un argument de langue optionnel pour récupérer les tables CANSIM / NMD en français:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">naissances &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_cansim.html">get_cansim</a></span>(<span class="st">"051-0013"</span>,<span class="dt">language=</span><span class="st">"fr"</span>)</a></code></pre></div>
</div>
<div id="normalizing-values" class="section level3">
<h3 class="hasAnchor">
<a href="#normalizing-values" class="anchor"></a>Normalizing values</h3>
<p>The package also contains a convenience function that will re-scale and re-label variables that are reported in thousands or millions. CANSIM data values may be scaled by powers of 10.</p>
<p>For example, values in the VALUE field may be reported in “millions”, so a VALUE of 10 means 10,000,000. The <code>normalize_cansim_values</code> function automatically scales the VALUE field to be a number, so the VALUE will be converted from 10 to 10000000 in the example given.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">data &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_cansim.html">get_cansim</a></span>(<span class="st">"17-10-0079-01"</span>) <span class="op">%&gt;%</span><span class="st"> </span>normalize_cansim_values</a></code></pre></div>
<p>To retain the original VALUE field pass the <em>replacement_value = <your field name></your></em> option to create a field to contain the normailzed value.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">data &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_cansim.html">get_cansim</a></span>(<span class="st">"17-10-0079-01"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="reference/normalize_cansim_values.html">normalize_cansim_values</a></span>(<span class="dt">replacement_value=</span><span class="st">"normalized value"</span>)</a></code></pre></div>
<p>By default percentages will be converted to rates, so instead of being 0-100 it will be normalized to 0-1. To change that behaviour set <em>normalize_percent=FALSE</em>.</p>
</div>
<div id="license" class="section level3">
<h3 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h3>
<p>The code in this package is licensed under the MIT license. The bundled table metadata in Sysdata.R, as well as all Statistics Canada data retrieved using this package is made available under the Statistics Canada Open Licence Agreement, a copy of which is included in the R folder. The Statistics Canada Open Licence Agreement requires that:</p>
<blockquote>
<p>Subject to this agreement, Statistics Canada grants you a worldwide, royalty-free, non-exclusive &gt;licence to:</p>
<ul>
<li>use, reproduce, publish, freely distribute, or sell the Information;</li>
<li>use, reproduce, publish, freely distribute, or sell Value-added Products; and,</li>
<li>sublicence any or all such rights, under terms consistent with this agreement.</li>
</ul>
<p>In doing any of the above, you shall:</p>
<ul>
<li>reproduce the Information accurately;</li>
<li>not use the Information in a way that suggests that Statistics Canada endorses you or your use of the Information;</li>
<li>not misrepresent the Information or its source;</li>
<li>use the Information in a manner that does not breach or infringe any applicable laws;</li>
<li>not merge or link the Information with any other databases for the purpose of attempting to identify an individual person, business or organization; and</li>
<li>not present the Information in such a manner that gives the appearance that you may have received, or had access to, information held by Statistics Canada about any identifiable individual person, business or organization.</li>
</ul>
</blockquote>
</div>
<div id="attribution" class="section level3">
<h3 class="hasAnchor">
<a href="#attribution" class="anchor"></a>Attribution</h3>
<p>Subject to the Statistics Canada Open Licence Agreement, licensed products using Statistics Canada data should employ the following acknowledgement of source:</p>
<blockquote>
<p>Acknowledgment of Source</p>
<p>(a) You shall include and maintain the following notice on all licensed rights of the Information:</p>
<p>Source: Statistics Canada, name of product, reference date. Reproduced and distributed on an “as is” basis with the permission of Statistics Canada.</p>
<p>(b) Where any Information is contained within a Value-added Product, you shall include on such Value-added Product the following notice:</p>
<p>Adapted from Statistics Canada, name of product, reference date. This does not constitute an endorsement by Statistics Canada of this product.</p>
</blockquote>
</div>
<div id="contributing" class="section level3">
<h3 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h3>
<p>This package is under active development and may have some bugs. <a href="https://github.com/mountainMath/cansim/issues">Issues</a> and <a href="https://github.com/mountainMath/cansim/pulls">pull requests</a> are highly appreciated.</p>
</div>
<div id="to-do" class="section level3">
<h3 class="hasAnchor">
<a href="#to-do" class="anchor"></a>To-do</h3>
<ul>
<li>[x] Clean up package and function documentation</li>
<li>[x] Provide additional user control over cache location</li>
<li>[x] Test for more bugs</li>
<li>[ ] Submit to CRAN</li>
</ul>
</div>
<div id="related-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#related-packages" class="anchor"></a>Related packages</h3>
<ul>
<li><p>There exists a <a href="https://cran.r-project.org/web/packages/CANSIM2R/index.html">CANSIM2R package</a> on CRAN that shares some functionality.</p></li>
<li><p><a href="https://github.com/bcgov/CANSIM-dataviewer">CANSIM-dataviewer</a> is another tool that depends on the existing <em>CANSIM2R</em> package with a focus on uses for the Province of British Columbia.</p></li>
<li><p><a href="https://github.com/mountainMath/cancensus">cancensus</a> is a package designed to access, retrieve, and work with Canadian Census data and geography. A stable version is available on CRAN and a development version is on Github.</p></li>
</ul>
</div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jens von Bergmann <br><small class="roles"> Maintainer </small>  </li>
<li>Dmitry Shkolnik <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/mountainMath/cansim"><img src="https://travis-ci.org/mountainMath/cansim.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://cran.r-project.org/package=cansim"><img src="http://www.r-pkg.org/badges/version/cansim" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jens von Bergmann, Dmitry Shkolnik.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
